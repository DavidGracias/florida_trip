{"filter":false,"title":"roommates.php","tooltip":"/includes/roommates.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":168,"column":10},"action":"insert","lines":["<?php","    $isStudent = $_SESSION[\"userLevel\"] == $_userType[\"student\"];","    if($isStudent)","        $result=mysqli_query($conn, \"SELECT * FROM `trip` WHERE `gradYear`=\".$_SESSION[\"gradYear\"]);","    $isStudent = $isStudent && mysqli_num_rows($result) > 0 && $row=mysqli_fetch_assoc($result);","    if($isStudent && $row[\"displayAssignments\"] == 1){","        // date('H:i:s', strtotime($row[\"formEnd\"]));","    ?>","    <div class=\"container-fluid row color-white\" style=\"background-color: #2d3774; padding: 30px 30px 30px 30px\">","        <div class=\"col-xs-12 row\">","            <h2 class=\"padding-3 margin-0 color-red vertical-align flex-nowrap\">","                <i class=\"fas fa-exclamation-triangle fa-sm\"></i>","                <div class=\"flex-grow text-center\">IMPORTANT INFORMATION</div>","                <i class=\"fas fa-exclamation-triangle fa-sm\"></i>","            </h2>","            <div class=\"flex-start col-xs-12 row\" style=\"padding-top: 5px; font-size: 1.2em\">","                <div>","                    <h3>","                        Important Files","                    </h3>","                    <div style=\"padding: 0px 25px\">","                        <i class=\"fas fa-clipboard-list\"></i>","                        <span class=\"a pointer\" data-dismiss=\"modal\" data-toggle=\"modal\" data-target=\"#itineraryModal\">","                            View Itinerary","                        </span>","                        ","                        <?php","                            $i = '<i class=\"';","                            $li = '<div class=\"padding-2 flex-grow\">';","                        ?>","                        <div class=\"vertical-align flex-nowrap\">","                            <?php $result=mysqli_query($conn, \"SELECT * FROM `form` WHERE `studID`=\".$_SESSION[\"id\"]);","                                if(mysqli_num_rows($result) == 0){","                                    $i.='fas fa-hourglass-half color-orange';","                                    $li.= '<span class=\"a pointer\" data-toggle=\"modal\" data-target=\"#medicalFormModal\">Fill Medical Form</span>';","                                    include_once(\"includes/modals/medicalInformationForm.php\");","                                }","                                else{","                                    $i.='fas fa-check color-green';","                                    $li.= '<span class=\"a pointer\" data-toggle=\"modal\" data-target=\"#medicalInfoModal\">View Medical Information</span>';","                                    include_once(\"includes/modals/medicalInformation.php\");","                                }","                                $i.='\"></i>';","                                $li.='</div>';","                                echo $i.$li;","                            ?>","                        </div>","                        ","                        <?php","                            $result=mysqli_query($conn, \"SELECT * FROM `students` WHERE `studID`=\".$_SESSION[\"id\"]);","                            $row=mysqli_fetch_assoc($result);","                            $i = '<i class=\"';","                            $li = '<div class=\"padding-2 flex-grow\">';","                        ?>","                        <div class=\"vertical-align flex-nowrap\">","                            <?php","                                if($row[\"seniorTripContract\"] == 0){","                                    $i.='fas fa-hourglass-half color-orange';","                                    $li.= '<span class=\"a pointer\" data-toggle=\"modal\" data-target=\"#seniorTripContractModal\">Sign Senior Trip Contract</span>';","                                    include_once(\"includes/modals/seniorTripContract.php\");","                                }","                                else{","                                    $i.='fas fa-check color-green';","                                    $li.= '<a class=\"a color-white\" href=\"files/senior_trip_contract.pdf\" target=\"_blank\">View Senior Trip Contract</a>';","                                }","                                $i.='\"></i>';","                                $li.='</div>';","                                echo $i.$li;","                            ?>","                        </div>","                    </div>","                </div>","                <div class=\"flex-grow\" id=\"assignments\">","                    <h3>","                        Roommate Assignments","                    </h3>","                    <div class=\"container-fluid\">","                        <?php","                        ","                        $sql = \"SELECT * FROM `assignments` WHERE `stud1`='\".$_SESSION[\"id\"].\"'\";","                        $sql.= \" OR `stud2`='\".$_SESSION[\"id\"].\"'\";","                        $sql.= \" OR `stud3`='\".$_SESSION[\"id\"].\"'\";","                        $sql.= \" OR `stud4`='\".$_SESSION[\"id\"].\"'\";","                        $result=mysqli_query($conn, $sql);","                        if(mysqli_num_rows($result) > 0){","                            $students = [ \"\", \"\", \"\", \"\" ];","                            $confirmation = [ \"\", \"\", \"\", \"\" ];","                            while($row=mysqli_fetch_assoc($result)){","                                $students = [ $row[\"stud1\"], $row[\"stud2\"], $row[\"stud3\"], $row[\"stud4\"] ];","                                $confirmation = str_split($row[\"confirmation\"]);","                                $eq = array_search($_SESSION[\"id\"], $students);","                                if( $confirmation[$eq] == \"1\" ){","                                    break;","                                }","                                else{ ?>","                                    ","                                <?php }","                            }","                            for($i = 0; $i < count($students); $i++){","                                if($students[$i] == \"\"){","                                    $iColor = \"red\";","                                    $content = \"<input type='text' class='searchRoommate fa-sm color-black' placeholder='Search Roommate...'/>\";","                                }","                                else{","                                     if($confirmation[$i] == \"1\")","                                        $iColor = \"green\";","                                    if($confirmation[$i] == \"0\")","                                        $iColor = \"orange\";","                                    $result=mysqli_query($conn, \"SELECT * FROM `students` WHERE `studID`='\".$students[$i].\"'\");","                                    if(mysqli_num_rows($result) > 0 && $row=mysqli_fetch_assoc($result)){","                                        $content = $row[\"fName\"].\" \".$row[\"mName\"].\" \".$row[\"lName\"];","                                    }","                                }","                                    ","                                ?>","                                <div class=\"padding-4 vertical-align col-xs-12 col-xs-6\" style=\"height: 50px\">","                                    <i class=\"fa-lg fas fa-bed color-<?php echo $iColor; ?>\"></i>","                                    <div style=\"padding-left: 6px\">","                                        <?php echo $content; ?>","                                    </div>","                                </div>","                        <?php } ?>","<script>","    $( function(){","        var availableTags = [","            <?php","            $where = \"WHERE `gradYear`=\".$_SESSION[\"gradYear\"].\" AND NOT `studID`=\".$_SESSION[\"id\"];","            $result=mysqli_query($conn, \"SELECT * FROM `students` \".$where);","            while(mysqli_num_rows($result) > 0 && $row = mysqli_fetch_assoc($result)){ ?>","                {","                    value: \"<?php echo $row[\"studID\"]; ?>\",","                    label: \"<?php echo ucwords($row[\"fName\"].\" \".$row[\"mName\"].\" \".$row[\"lName\"].\" - `\".substr($row[\"gradYear\"], -2)); ?>\",","                    desc: \"(<?php echo $row[\"studID\"]; ?>)\",","                },","                {","                    value: \"<?php echo $row[\"studID\"]; ?>\",","                    label: \"<?php echo $row[\"studID\"]; ?>\",","                    desc: \"(<?php echo ucwords($row[\"fName\"].\" \".$row[\"mName\"].\" \".$row[\"lName\"].\" - `\".substr($row[\"gradYear\"], -2)); ?>)\",","                },","            <?php } ?>","        ];","        $(\"#assignments .searchRoommate\").autocomplete({","            minLength: 1,","            source: availableTags,","            focus: function( event, ui ) {","                $(this).val( ui.item.label );","            return false;","          },","        }).autocomplete( \"instance\" )._renderItem = function( ul, item ) {","              return $( \"<li>\" )","                .append( \"<div>\" + item.label + \"<br>\" + item.desc + \"</div>\" )","                .appendTo( ul );","        };","    });","</script>","                        <?php }","                        else{ ?>","                            <div>","                                ","                            </div>","                        <?php } ?>","                        ","                    </div>","                </div>","            </div>","        </div>","    </div>","    <br/>","<?php } ?>"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":19,"column":25},"end":{"row":19,"column":25},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1558709749239,"hash":"e04ca2db734d7e066378771e2c2e0cec843cdda2"}